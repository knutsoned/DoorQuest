# Game Log
## Sunday

### 5am
- thinking the jam starts at 5pm, spend the whole day working on rewriting RxJs

### 5pm
- realize the jam started 12 hours ago, think about doors with the Super Bowl on in the bg
- game concept:

#### Door Quest, An Endless Opener
A 2.5D isometric or 3D fixed 3rd person platformer (refer to as 3D either way)
- 3D view is constructed from procedurally generated tilemaps
- each level is a room connected to another via 1 or more doors
- 3D version has a pixelation filter
- graphics style like 1980s Sierra adventure games
- player character is an anthropomorphic crystal ball
- interactions are automatic by rolling over to hitbox
- WASD-default plus hotkeys control scheme manages accel/devel and console access
- physics is realistic in the sense that there is friction and controls apply force only
- start screen is a room containing a book and a locked door
- opening the book pulls up ~~cheat code~~developer console
- game can be played as a text adventure via the console
- if a screen reader can be detected, autolaunch the console on load
- start of game is opening the book and proceeding through the adventure
- at some point in text adventure, player goes through a door which starts the game proper
- console parser accepts developer or adventure commands: verb [noun [value]] and choice selection
- text and choice structure is defined by an Inkle file
- hitboxes in the 3D world cause corresponding action in console
- 3D pauses when console is open, resumes when closed
- if text adventure changes scene, new scene is loaded when 3D resumes
- actions from text adventure are applied to scene, as if the player moved to each hitbox
- player starts at default or location of most recent hitbox
- a special door returns the player to the start room
- start room door is then unlocked and moving through it generates a new level
- levels are generated by selecting a template for a room including exits, then adding a room for each exit, where passing through 3 unique exits finishes the level
- after generating all rooms, objects (obstacles, actors, items) are added
- optional final pass customizes objects
- PRNG + seed + algorithm defines a unique level
- game objective is to unlock start door by returning to it from inside the book
- identify https://github.com/SvenFrankson/marble-fall as potential pilfering source

## Monday
### 11am
- identify https://github.com/BabylonJS/SummerFestival as a good place to start
- initialize git repo https://github.com/knutsoned/DoorQuest
### 2pm
- go to the gym and think some more, adding notes above
- realize that the Kenney platformer kits for 2D are side scroll oriented, and the isometric 3D seems to be actual 3D objects and not 2.5D isometric tiles (need to verify: some 3D kits come with isometric sprite sheets)
- make note to find out how much overlap there is between Summer Festival and Marble Fall
- make joking plans to design a QBertlike called Spring Party and a brawler called Endless Summer Battle

### 5pm
- mkdir src
- j/k it was [npm create vite](https://doc.babylonjs.com/guidedLearning/usingVite)

### 5:30pm
- display a ball
- delete entire project and reload from GH to make sure that part works

### 7pm
- remember during dinner this was going to be an Elevator Action/Rolling Thunder style stealth side scroller
- perhaps it's not too late
- realize I actually have to figure out how to load assets from Kenney and Sketchfab into Rhino and also save them

## Tuesday
### 7am
- Paczki Day, cardiology follow up, dinner at Fogo de Chao
- write MVP spec on the way to Chicago, tracking additional features separately

### MVP specs
- 3x3 "rooms"
- decision points cause camera chase, no return
- chase ends when next choice fully visible
- basic controls: arrow keys, main button (space)
- define tab as escaping through a sequence (escape and tab have same effect)
- long press of main button is esc/tab, even in console
- tab switches between full console (default), 3D view with console sidebar, 3D only
- when console has focus, accept [A-Za-z0-9], space, backspace, enter
- mouse dragging will rotate view (ArcRotate/OrbitControls for camera)
- basic dialogs take focus, non-choice can be dismissed with tab (back to previous view)
- level shape system as interchangeable blocks with variations
- story structure determines shape of paths (door === story choice)
- level is made of 3x3 grid of rooms with internal 3x3 structure
- write stories about Kenney assets?
- form a recursive madlib (story structure has high level interchangeable components who themselves have fields that can be populated with randomly selected provided values)
- read the Canterbury Tales Cliff Notes for inspiration

### Additional features
- env effects/ants caused by roving Game of Life overlay transformed into generators, paths, probability/frequency
- mobile version (touch and tilt support)
- inclusivity features (color palette, control remapping, gamepad support, text interface)
- allow sidebar to show overhead map and 1st person view
- toggle/swap 3rd person(default)/1st person view
- add tags to choice, use tag frequency to affect next level (character dialog, story elements -> game env)
- actor pathfinding (player in 3D view responds to basic text commands, chase avoid for NPCs)

## Wednesday
### 11am
- momentary panic of realizing it is Wednesday

### 1pm
- finish some irl work and then start looking for the core components (basic physics stuff)
- check out https://github.com/jeromeetienne/marbleSoccer as a possible starting point
- now using this as overall template https://github.com/RaananW/babylonjs-webpack-es6
- SummerFestival to be used for overall structure and flow, with marbleSoccer showing how to do some things I want to do but with THREE
- have not looked at marble-fall code yet, would be great reference if a track is needed

### 5pm
- start thinking about Valentine's Day dinner
- quickly wrap up for the day by merging @RaananW's code into the vite template and fixing it with the author's own response to a [post](https://forum.babylonjs.com/t/using-ammojs-with-babylon/26413/8) unrelated to vite
- now there is a ball that drops and bounces and becomes stationary

### 6:20pm
- start working on a 16:9 layout and try to make it responsive
- main viewport is square (9x9). landscape has sidebar with 3x4 1st person and 4x4 map
- default main perspective is offset overhead, swappable with 1st person
- remaining space is taken up by console
- portrait mode makes 1st person 5x4. 1st person and map above main, console below
- can disable 1st person (replace with a logo) and map (expand 1st person horizontally)
- if both disables, console takes up entire space
- think about a more square layout where main is upper left, map is upper right, 1st person fills below main, console fills below map
- if [tilt](https://developer.mozilla.org/en-US/docs/Web/API/AbsoluteOrientationSensor) is enabled, orientation is locked, otherwise try to be responsive

### 10:30pm
- think about some puzzles, like rolling over switches and picking up items to affect NPCs
- inv has 1 slot and there is no drop, so if you pick something up, you need to find someone to take it
- rubber bands?
- some items consumable (no use action either, goes into effect right away)
- NPCs that start above buildings, trigger to release
- "must go through doors like Kool Aid Man" (no hands!), replay feature to show carnage
- have to hit doors hard to open them, then they break while passing through (no backsies)
- something about mini-rooms with doors that open and you can duck inside to hide from NPCs, but then sometimes they just teleport you to a different mini-room and sometimes NPCs spawn from them
- "characters in relation to course imply story" (only vaguely remember what that means the next morning)
- some choices cause environmental effects (choice and exit door mean the same thing)
- ex: triggers for floods and landslides
- no jumping but can catch air off of ramps
- so, maybe a puzzle could be a ramp you need to go fast enough over to clear a jump and hit the door hard
- obligatory squeezing through of narrow spaces (difficulty level determines if you really have to aim or it's more like bumper bowling)
- stats: top SPeeD, DEXterity (handling, force applied by controls, ACCeleration), RADius, MASs
- console verbs: lock, unlock, list, get, set, reset, help
- get/list/set vars: gravity, friction, max speed, force, radius, mass

### 10:45pm
- calculate 2-3 segment primary pathfinding
- if room has 2 exits, pick segment and do same from a point on the segment to other exit
- use blocks and half blocks for contours
- for now let's make the main course be 100% voxel and then add terrain detail on 2nd pass
- calculate 3 largest contiguous flat surfaces
- maybe pick a larger building to put on the largest surfaces
- add some jumps on pass 1.5
- have a couple of items with different ways to obtain (exits and items are color coded good/evil)

## Thursday
### 9:45am
- create a burndown list for the next couple hours: add texture to sphere, build UI shell, see if Sensor API actually works (added texture, thought about UI, found Gamepad API is a mess, not sure about Sensor)

## 11:05am
- got the texture to stop displaying upside down and read up on indices and positions for mesh building https://playground.babylonjs.com/#I092BE
- start work on UI key mapping based on https://stephendoddtech.com/blog/game-design/keyboard-event-game-input-map

## Friday
### 11am
- will copy notes from last night later
- sprint meta-grooming: focus on making one level with one exit that feels done
- then make a variation with two exits, then make some interchangeable pieces
- previous control scheme could change camera with mouse, now make camera fixed and let mouse be like a gamepad
- also try to include thee most basic gamepad support 
